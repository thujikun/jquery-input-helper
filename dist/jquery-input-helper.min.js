/**
* @fileOverview jquery-input-helper
* @description depend on jQuery
* @name jquery-input-helper.js
* @author thujikun
* @version 1.0.0
* Copyright (c) 2015 "thujikun" Ryosuke Tsuji
* Licensed under the MIT license.
*/(function(a){"use strict";function b(a,b,c){if("defineProperty"in Object)try{Object.defineProperty(a,b,{enumerable:!1,writable:!1,configurable:!1,value:c})}catch(d){a[b]=c}else a[b]=c}var c=function(a,b){this._constructor(a,b)};!function(){b(c.prototype,"_defaults",{helper:{cancelspace:{listener:"_cancelSpace",eventtype:"keydown"},autonext:{listener:"_moveNext",eventtype:"input"},autoprev:{listener:"_movePrev",eventtype:"keydown"},full2half:{listener:"_full2half",eventtype:"blur"},fullKana2halfKana:{listener:"_fullKana2halfKana",eventtype:"blur"},half2full:{listener:"_half2full",eventtype:"blur"},halfKana2fullKana:{listener:"_halfKana2fullKana",eventtype:"blur"},restriction:{listener:"_restrict",eventtype:"input"},insert:{listener:"_insert",eventtype:"input"},credit:{listener:"_addCreditCompany",eventtype:"input"},remove:{listener:"_remove",eventtype:"input"}},restriction:{number:/[^0-9]/,"half-char":/[^0-9a-zA-Z]/,half:/[^\x20-\x7e]/,"half-kana":/[^ｦ-ﾝ]/,tel:/[^0-9\-]/,"full-kana":/[^ァ-ヶ]/,date:/[^0-9\/]/,zip:/[^0-9\-]/,credit:/[^0-9\-]/},charTable:{a:"ａ",b:"ｂ",c:"ｃ",d:"ｄ",e:"ｅ",f:"ｆ",g:"ｇ",h:"ｈ",i:"ｉ",j:"ｊ",k:"ｋ",l:"ｌ",m:"ｍ",n:"ｎ",o:"ｏ",p:"ｐ",q:"ｑ",r:"ｒ",s:"ｓ",t:"ｔ",u:"ｕ",v:"ｖ",w:"ｗ",x:"ｘ",y:"ｙ",z:"ｚ",A:"Ａ",B:"Ｂ",C:"Ｃ",D:"Ｄ",E:"Ｅ",F:"Ｆ",G:"Ｇ",H:"Ｈ",I:"Ｉ",J:"Ｊ",K:"Ｋ",L:"Ｌ",M:"Ｍ",N:"Ｎ",O:"Ｏ",P:"Ｐ",Q:"Ｑ",R:"Ｒ",S:"Ｓ",T:"Ｔ",U:"Ｕ",V:"Ｖ",W:"Ｗ",X:"Ｘ",Y:"Ｙ",Z:"Ｚ",0:"０",1:"１",2:"２",3:"３",4:"４",5:"５",6:"６",7:"７",8:"８",9:"９"},kanaTable:{"ｦ":"ヲ","ｧ":"ァ","ｨ":"ィ","ｩ":"ゥ","ｪ":"ェ","ｫ":"ォ","ｬ":"ャ","ｭ":"ュ","ｮ":"ョ","ｯ":"ッ","ｰ":"ー","ｱ":"ア","ｲ":"イ","ｳ":"ウ","ｴ":"エ","ｵ":"オ","ｶ":"カ","ｷ":"キ","ｸ":"ク","ｹ":"ケ","ｺ":"コ","ｻﾞ":"ザ","ｼﾞ":"ジ","ｽﾞ":"ズ","ｾﾞ":"ゼ","ｿﾞ":"ゾ","ｻ":"サ","ｼ":"シ","ｽ":"ス","ｾ":"セ","ｿ":"ソ","ﾀﾞ":"ダ","ﾁﾞ":"ヂ","ﾂﾞ":"ヅ","ﾃﾞ":"デ","ﾄﾞ":"ド","ﾀ":"タ","ﾁ":"チ","ﾂ":"ツ","ﾃ":"テ","ﾄ":"ト","ﾅ":"ナ","ﾆ":"ニ","ﾇ":"ヌ","ﾈ":"ネ","ﾉ":"ノ","ﾊﾟ":"パ","ﾋﾟ":"ピ","ﾌﾟ":"プ","ﾍﾟ":"ペ","ﾎﾟ":"ポ","ﾊﾞ":"バ","ﾋﾞ":"ビ","ﾌﾞ":"ブ","ﾍﾞ":"ベ","ﾎﾞ":"ボ","ﾊ":"ハ","ﾋ":"ヒ","ﾌ":"フ","ﾍ":"ヘ","ﾎ":"ホ","ﾏ":"マ","ﾐ":"ミ","ﾑ":"ム","ﾒ":"メ","ﾓ":"モ","ﾔ":"ヤ","ﾕ":"ユ","ﾖ":"ヨ","ﾗ":"ラ","ﾘ":"リ","ﾙ":"ル","ﾚ":"レ","ﾛ":"ロ","ﾜ":"ワ","ﾝ":"ン"}}),b(c.prototype,"_constructor",function(b,c){this.config=a.extend(!0,{},this._defaults,b),this.option=c,this._set()}),b(c.prototype,"_set",function(){var b=this,c=b.option,d=b.config.helper,e=b.config.$input,f={};a.each(c,function(a,c){var e=d[a];f[e.eventtype]=f[e.eventtype]||[],f[e.eventtype].push(function(a){b[e.listener](a,c)})}),a.each(f,function(a,c){e.on(a,function(a){c.forEach(function(c){c.call(b,a)})})})}),b(c.prototype,"_cancelSpace",function(a,b){var c=a.keyCode;b&&32===c&&a.preventDefault()}),b(c.prototype,"_moveNext",function(b,c){setTimeout(function(){var d=b.target.value,e=a(b.target);!c||0>c||c<=d.length&&e.blur().next().focus()})}),b(c.prototype,"_movePrev",function(b,c){setTimeout(function(){var d=b.keyCode,e=b.target.value,f=a(b.target);c&&!e&&8===d&&f.blur().prev().focus()})}),b(c.prototype,"_full2half",function(b,c){var d=b.target.value||"",e="",f=this.config.charTable;c&&d.split("").forEach(function(b){a.each(f,function(a,c){b=b.replace(c,a)}),e+=b}),d!==e&&(b.target.value=e)}),b(c.prototype,"_fullKana2halfKana",function(b,c){var d=b.target.value||"",e="",f=this.config.kanaTable;c&&d.split("").forEach(function(b){a.each(f,function(a,c){b=b.replace(c,a)}),e+=b}),b.target.value=e}),b(c.prototype,"_half2full",function(b,c){var d=b.target.value||"",e="",f=this.config.charTable;c&&d.split("").forEach(function(b){a.each(f,function(a,c){b=b.replace(a,c)}),e+=b}),d!==e&&(b.target.value=e)}),b(c.prototype,"_halfKana2fullKana",function(b,c){var d=b.target.value||"",e="",f=this.config.kanaTable;c&&d.split("").forEach(function(b){a.each(f,function(a,c){b=b.replace(a,c)}),e+=b}),d!==e&&(b.target.value=e)}),b(c.prototype,"_restrict",function(a,b){var c=a.target.value||"",d="",e=this.config.restriction[b];c.split("").forEach(function(a){d+=a.replace(e,"")}),c!==d&&(a.target.value=d,a.preventDefault(),a.stopPropagation())}),b(c.prototype,"_insert",function(a,b){setTimeout(function(){var c=a.target.value||"";switch(b){case"zip":c=c.replace(/\-/g,""),c=c.replace(/(\d{3})(-?\d+)$/,"$1-$2");break;case"credit":for(c=c.replace(/\-/g,"");c!==(c=c.replace(/(\d{4})(\d+)$/,"$1-$2"));)c=c}a.target.value=c})}),b(c.prototype,"_addCreditCompany",function(b,c){var d=(b.target.value||"").replace("-",""),e="unknown",f=parseInt(d.substring(0,4));c&&(/^5/.test(d)?e="master":/^4/.test(d)?e="visa":/^3[47]/.test(d)?e="amex":f>=3528&&3589>=f?e="jcb":(300<=parseInt(d.substring(0,5),10)&&parseInt(d.substring(0,5),10)<=305||"3095"===d.substring(0,2)||"36"===d.substring(0,2)||"38"===d.substring(0,2)||"39"===d.substring(0,2))&&(e="diners")),a(b.target).trigger("ditectcredit",{creditCardType:e})}),b(c.prototype,"_remove",function(b,c){var d=a(c);d.val("").trigger("input").trigger("blur")})}(),a.fn.inputHelper=function(){var b=Array.prototype.slice.call(arguments);if("string"==typeof b[0]){var d,e,f=a(this),g=f.data("__jquery-input-helper-instance");return g&&(d=b.shift(),e=g[d].apply(g,b)),e}return a(this).each(function(){var d,e,f=a(this),g=f.data("__jquery-input-helper-instance");return g?void 0:(d=b[0]||{},e=b[1],e?f.data("input-helper",e):e=f.data("input-helper"),e&&(d.$input=f,g=new c(d,e),f.data("__jquery-input-helper-instance",g)),f)})}}).call(window,jQuery);